{"ast":null,"code":"'use strict';\n\nvar TYPES = require('./datatypes').TYPES;\n\nvar Table = require('./table');\n\nvar PromiseLibrary = Promise;\nvar driver = {};\nvar map = [];\n/**\r\n * Register you own type map.\r\n *\r\n * @path module.exports.map\r\n * @param {*} jstype JS data type.\r\n * @param {*} sqltype SQL data type.\r\n */\n\nmap.register = function (jstype, sqltype) {\n  for (var index = 0; index < this.length; index++) {\n    var item = this[index];\n\n    if (item.js === jstype) {\n      this.splice(index, 1);\n      break;\n    }\n  }\n\n  this.push({\n    js: jstype,\n    sql: sqltype\n  });\n  return null;\n};\n\nmap.register(String, TYPES.NVarChar);\nmap.register(Number, TYPES.Int);\nmap.register(Boolean, TYPES.Bit);\nmap.register(Date, TYPES.DateTime);\nmap.register(Buffer, TYPES.VarBinary);\nmap.register(Table, TYPES.TVP);\n/**\r\n * @ignore\r\n */\n\nvar getTypeByValue = function getTypeByValue(value) {\n  if (value === null || value === undefined) {\n    return TYPES.NVarChar;\n  }\n\n  switch (typeof value) {\n    case 'string':\n      for (var _i = 0, _Array$from = Array.from(map); _i < _Array$from.length; _i++) {\n        var item = _Array$from[_i];\n\n        if (item.js === String) {\n          return item.sql;\n        }\n      }\n\n      return TYPES.NVarChar;\n\n    case 'number':\n    case 'bigint':\n      if (value % 1 === 0) {\n        if (value < -2147483648 || value > 2147483647) {\n          return TYPES.BigInt;\n        } else {\n          return TYPES.Int;\n        }\n      } else {\n        return TYPES.Float;\n      }\n\n    case 'boolean':\n      for (var _i2 = 0, _Array$from2 = Array.from(map); _i2 < _Array$from2.length; _i2++) {\n        var _item = _Array$from2[_i2];\n\n        if (_item.js === Boolean) {\n          return _item.sql;\n        }\n      }\n\n      return TYPES.Bit;\n\n    case 'object':\n      for (var _i3 = 0, _Array$from3 = Array.from(map); _i3 < _Array$from3.length; _i3++) {\n        var _item2 = _Array$from3[_i3];\n\n        if (value instanceof _item2.js) {\n          return _item2.sql;\n        }\n      }\n\n      return TYPES.NVarChar;\n\n    default:\n      return TYPES.NVarChar;\n  }\n};\n\nmodule.exports = {\n  driver: driver,\n  getTypeByValue: getTypeByValue,\n  map: map\n};\nObject.defineProperty(module.exports, 'Promise', {\n  get: function get() {\n    return PromiseLibrary;\n  },\n  set: function set(value) {\n    PromiseLibrary = value;\n  }\n});","map":{"version":3,"sources":["C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/mssql/lib/shared.js"],"names":["TYPES","require","Table","PromiseLibrary","Promise","driver","map","register","jstype","sqltype","index","length","item","js","splice","push","sql","String","NVarChar","Number","Int","Boolean","Bit","Date","DateTime","Buffer","VarBinary","TVP","getTypeByValue","value","undefined","Array","from","BigInt","Float","module","exports","Object","defineProperty","get","set"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nconst TYPES = require('./datatypes').TYPES\r\nconst Table = require('./table')\r\n\r\nlet PromiseLibrary = Promise\r\nconst driver = {}\r\nconst map = []\r\n\r\n/**\r\n * Register you own type map.\r\n *\r\n * @path module.exports.map\r\n * @param {*} jstype JS data type.\r\n * @param {*} sqltype SQL data type.\r\n */\r\n\r\nmap.register = function (jstype, sqltype) {\r\n  for (let index = 0; index < this.length; index++) {\r\n    const item = this[index]\r\n    if (item.js === jstype) {\r\n      this.splice(index, 1)\r\n      break\r\n    }\r\n  }\r\n\r\n  this.push({\r\n    js: jstype,\r\n    sql: sqltype\r\n  })\r\n\r\n  return null\r\n}\r\n\r\nmap.register(String, TYPES.NVarChar)\r\nmap.register(Number, TYPES.Int)\r\nmap.register(Boolean, TYPES.Bit)\r\nmap.register(Date, TYPES.DateTime)\r\nmap.register(Buffer, TYPES.VarBinary)\r\nmap.register(Table, TYPES.TVP)\r\n\r\n/**\r\n * @ignore\r\n */\r\n\r\nconst getTypeByValue = function (value) {\r\n  if ((value === null) || (value === undefined)) { return TYPES.NVarChar }\r\n\r\n  switch (typeof value) {\r\n    case 'string':\r\n      for (const item of Array.from(map)) {\r\n        if (item.js === String) {\r\n          return item.sql\r\n        }\r\n      }\r\n\r\n      return TYPES.NVarChar\r\n\r\n    case 'number':\r\n    case 'bigint':\r\n      if (value % 1 === 0) {\r\n        if (value < -2147483648 || value > 2147483647) {\r\n          return TYPES.BigInt\r\n        } else {\r\n          return TYPES.Int\r\n        }\r\n      } else {\r\n        return TYPES.Float\r\n      }\r\n\r\n    case 'boolean':\r\n      for (const item of Array.from(map)) {\r\n        if (item.js === Boolean) {\r\n          return item.sql\r\n        }\r\n      }\r\n\r\n      return TYPES.Bit\r\n\r\n    case 'object':\r\n      for (const item of Array.from(map)) {\r\n        if (value instanceof item.js) {\r\n          return item.sql\r\n        }\r\n      }\r\n\r\n      return TYPES.NVarChar\r\n\r\n    default:\r\n      return TYPES.NVarChar\r\n  }\r\n}\r\n\r\nmodule.exports = {\r\n  driver,\r\n  getTypeByValue,\r\n  map\r\n}\r\n\r\nObject.defineProperty(module.exports, 'Promise', {\r\n  get: () => {\r\n    return PromiseLibrary\r\n  },\r\n  set: (value) => {\r\n    PromiseLibrary = value\r\n  }\r\n})\r\n"]},"metadata":{},"sourceType":"script"}