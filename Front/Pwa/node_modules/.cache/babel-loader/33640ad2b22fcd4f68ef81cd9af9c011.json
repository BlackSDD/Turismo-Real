{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\matia\\\\Documents\\\\Git\\\\Turismo-Real\\\\front\\\\pwa\\\\src\\\\components\\\\Layouts\\\\Date-Picker.jsx\";\nimport React from 'react';\nimport DayPicker, { DateUtils } from 'react-day-picker';\nimport { Button, Form, Navbar } from 'react-bootstrap'; // import 'react-day-picker/lib/style.css';\n\nimport '../../assetss/css/Date-Picker.css';\nimport axios from 'axios';\nimport NavBar from './Navbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class DatePicker extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n      console.log(e.target.value);\n    };\n\n    this.HandleReserva = async (from, to, num, reservado) => {\n      console.log('# personas:', num); //Almaceno los datos del storage\n\n      let datos = {\n        id_usr: sessionStorage.idUsuario,\n        id_dpto: sessionStorage.id_d\n      };\n      const newReserva = {\n        fec_ini_rva: from,\n        fec_fin_rva: to,\n        num_pers: parseInt(num),\n        id_dpto: datos.id_dpto,\n        id_usr: datos.id_usr\n      };\n      axios.post('http://localhost:4000/API/reserva', newReserva);\n      let reserva = await axios.post('http://localhost:4000/API/reservaCurrent', datos);\n      console.log('Reserva data 0:', reserva.data[0]);\n      let infoResv = reserva.data;\n      let idReserva = infoResv.map(e => {\n        let x = e.curr_id;\n        return x;\n      });\n      console.log('infoResv:', infoResv.curr_id);\n      console.log('id final: ', idReserva);\n      sessionStorage.reserva = idReserva; // this.setState({reservado: true});\n      // console.log('Reservado: ',reservado);\n\n      sessionStorage.Pagar = true; // let redir = { redirect: \"http://localhost:3000/paypal\" };\n\n      window.location.href = \"/paypal\";\n    };\n\n    this.handleDayClick = this.handleDayClick.bind(this);\n    this.handleResetClick = this.handleResetClick.bind(this);\n    this.state = this.getInitialState();\n  }\n\n  getInitialState() {\n    return {\n      from: undefined,\n      to: undefined\n    };\n  }\n\n  handleDayClick(day, modifiers = {}) {\n    if (modifiers.disabled) {\n      return;\n    }\n\n    const range = DateUtils.addDayToRange(day, this.state);\n    this.setState(range);\n    this.setState({\n      selectedDay: modifiers.selected ? undefined : day\n    });\n  }\n\n  handleResetClick() {\n    this.setState(this.getInitialState());\n  }\n\n  render() {\n    const {\n      from,\n      to,\n      num,\n      reservado\n    } = this.state; // const reservado = this.state;\n\n    const modifiers = {\n      start: from,\n      end: to\n    };\n    console.log('rango: ', this.state.range);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"body-date-picker\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        id: \"container-date-picker\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [!from && !to && 'Elija una fecha de check-in.', from && !to && 'Elija una fecha de check-out', from && to && `Fecha de reserva desde: ${from.toLocaleDateString()} hasta:\n                          ${to.toLocaleDateString()}`, ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(DayPicker, {\n          id: \"date-picker\",\n          className: \"Selectable\",\n          numberOfMonths: this.props.numberOfMonths,\n          selectedDays: [from, {\n            from,\n            to\n          }],\n          showOutsideDays: true,\n          disabledDays: this.props.fechas.map(date => new Date(date)),\n          modifiers: modifiers,\n          onDayClick: this.handleDayClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          children: /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"Cantidad\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Ingrese la cantidad de personas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"num\",\n              onChange: this.onInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }, this), from && to && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"button-date-picker\",\n            variant: \"success\",\n            onClick: () => {\n              this.HandleReserva(from, to, num, reservado);\n            },\n            children: \"Continuar con la Reserva\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            id: \"button-date-picker\",\n            variant: \"info\",\n            onClick: this.handleResetClick,\n            children: \"Limpiar Campos de Fecha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this);\n  }\n\n}\nDatePicker.defaultProps = {\n  numberOfMonths: 2\n};","map":{"version":3,"sources":["C:/Users/matia/Documents/Git/Turismo-Real/front/pwa/src/components/Layouts/Date-Picker.jsx"],"names":["React","DayPicker","DateUtils","Button","Form","Navbar","axios","NavBar","DatePicker","Component","constructor","props","onInputChange","e","setState","target","name","value","console","log","HandleReserva","from","to","num","reservado","datos","id_usr","sessionStorage","idUsuario","id_dpto","id_d","newReserva","fec_ini_rva","fec_fin_rva","num_pers","parseInt","post","reserva","data","infoResv","idReserva","map","x","curr_id","Pagar","window","location","href","handleDayClick","bind","handleResetClick","state","getInitialState","undefined","day","modifiers","disabled","range","addDayToRange","selectedDay","selected","render","start","end","toLocaleDateString","numberOfMonths","fechas","date","Date","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DayPicker, { DateUtils } from 'react-day-picker';\r\nimport {Button, Form, Navbar} from 'react-bootstrap';\r\n// import 'react-day-picker/lib/style.css';\r\nimport '../../assetss/css/Date-Picker.css'\r\nimport axios from 'axios';\r\nimport NavBar from './Navbar';\r\n\r\nexport default class DatePicker extends React.Component {\r\n  static defaultProps = {\r\n    numberOfMonths: 2,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleDayClick = this.handleDayClick.bind(this);\r\n    this.handleResetClick = this.handleResetClick.bind(this);\r\n    this.state = this.getInitialState();\r\n  }\r\n\r\n  getInitialState() {\r\n    return {\r\n      from: undefined,\r\n      to: undefined,\r\n    };\r\n  }\r\n\r\n  handleDayClick(day, modifiers = {})  {\r\n    if (modifiers.disabled) {\r\n        return;\r\n      }\r\n        const range = DateUtils.addDayToRange(day, this.state);\r\n        this.setState(range);\r\n        this.setState({\r\n            selectedDay: modifiers.selected ? undefined : day,\r\n        });\r\n  }\r\n\r\n  onInputChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value});\r\n    console.log(e.target.value)\r\n}\r\n\r\n  HandleReserva = async(from, to, num, reservado) =>{\r\n    console.log('# personas:',num)\r\n    //Almaceno los datos del storage\r\n    let datos ={\r\n      id_usr: sessionStorage.idUsuario,\r\n      id_dpto : sessionStorage.id_d\r\n    };\r\n    const newReserva = {\r\n      fec_ini_rva : from,\r\n      fec_fin_rva : to,\r\n      num_pers: parseInt(num),\r\n      id_dpto: datos.id_dpto,\r\n      id_usr: datos.id_usr\r\n    };\r\n    axios.post('http://localhost:4000/API/reserva', newReserva);\r\n    let reserva = await axios.post('http://localhost:4000/API/reservaCurrent', datos);\r\n    console.log('Reserva data 0:',reserva.data[0])\r\n    let infoResv = reserva.data;\r\n    let idReserva = infoResv.map((e)=>{\r\n        let x = e.curr_id;\r\n        return  x\r\n        }\r\n    )\r\n    console.log('infoResv:', infoResv.curr_id);\r\n    console.log('id final: ', idReserva)\r\n    sessionStorage.reserva = idReserva;\r\n    // this.setState({reservado: true});\r\n    // console.log('Reservado: ',reservado);\r\n    sessionStorage.Pagar = true;\r\n\r\n    // let redir = { redirect: \"http://localhost:3000/paypal\" };\r\n    window.location.href= \"/paypal\";\r\n  }\r\n\r\n  handleResetClick() {\r\n    this.setState(this.getInitialState());\r\n  }\r\n\r\n  render() {\r\n    const { from, to, num, reservado} = this.state;\r\n    // const reservado = this.state;\r\n    const modifiers = { start: from, end: to };\r\n    \r\n    console.log('rango: ',this.state.range)\r\n      return (\r\n        <div id=\"body-date-picker\">\r\n            <Navbar/>\r\n            <div className=\"container\" id=\"container-date-picker\">\r\n              <h3>\r\n                  {!from && !to && 'Elija una fecha de check-in.'}\r\n                  {from && !to && 'Elija una fecha de check-out'}\r\n                  {from &&\r\n                      to &&\r\n                      `Fecha de reserva desde: ${from.toLocaleDateString()} hasta:\r\n                          ${to.toLocaleDateString()}`}{' '}\r\n              </h3>\r\n              <br/>\r\n              <DayPicker id=\"date-picker\"\r\n                  className=\"Selectable\"\r\n                  numberOfMonths={this.props.numberOfMonths}\r\n                  selectedDays={[from, { from, to }]}\r\n                  showOutsideDays\r\n                  disabledDays={     \r\n                      this.props.fechas.map(date => new Date(date))              \r\n                  }\r\n                  modifiers={modifiers}\r\n                  onDayClick={this.handleDayClick}\r\n              />\r\n              <br/>\r\n\r\n\r\n              <Form>\r\n                <Form.Group className=\"mb-3\" controlId=\"Cantidad\">\r\n                  <Form.Label>Ingrese la cantidad de personas</Form.Label>\r\n                  <Form.Control  name=\"num\"  onChange={this.onInputChange} required/>\r\n                </Form.Group>\r\n              </Form>\r\n\r\n              {from && to && (\r\n                <div>\r\n                  <Button id=\"button-date-picker\" variant=\"success\" onClick={()=>{this.HandleReserva(from,to, num, reservado)}}>\r\n                      Continuar con la Reserva\r\n                  </Button>\r\n                  <Button id=\"button-date-picker\" variant=\"info\" onClick={this.handleResetClick}>\r\n                    Limpiar Campos de Fecha\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n        </div>\r\n        \r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}