{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nimport { HttpHeaders } from \"../httpHeaders\";\n/**\r\n * Authenticates to a service using an API key.\r\n */\n\nvar ApiKeyCredentials =\n/** @class */\nfunction () {\n  /**\r\n   * @constructor\r\n   * @param {object} options   Specifies the options to be provided for auth. Either header or query needs to be provided.\r\n   */\n  function ApiKeyCredentials(options) {\n    if (!options || options && !options.inHeader && !options.inQuery) {\n      throw new Error(\"options cannot be null or undefined. Either \\\"inHeader\\\" or \\\"inQuery\\\" property of the options object needs to be provided.\");\n    }\n\n    this.inHeader = options.inHeader;\n    this.inQuery = options.inQuery;\n  }\n  /**\r\n   * Signs a request with the values provided in the inHeader and inQuery parameter.\r\n   *\r\n   * @param {WebResource} webResource The WebResource to be signed.\r\n   * @returns {Promise<WebResource>} The signed request object.\r\n   */\n\n\n  ApiKeyCredentials.prototype.signRequest = function (webResource) {\n    if (!webResource) {\n      return Promise.reject(new Error(\"webResource cannot be null or undefined and must be of type \\\"object\\\".\"));\n    }\n\n    if (this.inHeader) {\n      if (!webResource.headers) {\n        webResource.headers = new HttpHeaders();\n      }\n\n      for (var headerName in this.inHeader) {\n        webResource.headers.set(headerName, this.inHeader[headerName]);\n      }\n    }\n\n    if (this.inQuery) {\n      if (!webResource.url) {\n        return Promise.reject(new Error(\"url cannot be null in the request object.\"));\n      }\n\n      if (webResource.url.indexOf(\"?\") < 0) {\n        webResource.url += \"?\";\n      }\n\n      for (var key in this.inQuery) {\n        if (!webResource.url.endsWith(\"?\")) {\n          webResource.url += \"&\";\n        }\n\n        webResource.url += key + \"=\" + this.inQuery[key];\n      }\n    }\n\n    return Promise.resolve(webResource);\n  };\n\n  return ApiKeyCredentials;\n}();\n\nexport { ApiKeyCredentials };","map":{"version":3,"sources":["../../../lib/credentials/apiKeyCredentials.ts"],"names":[],"mappings":"AAAA;AACA;AAEA,SAAS,WAAT,QAA4B,gBAA5B;AAmBA;;AAEG;;AACH,IAAA,iBAAA;AAAA;AAAA,YAAA;AAUE;;;AAGG;AACH,WAAA,iBAAA,CAAY,OAAZ,EAA4C;AAC1C,QAAI,CAAC,OAAD,IAAa,OAAO,IAAI,CAAC,OAAO,CAAC,QAApB,IAAgC,CAAC,OAAO,CAAC,OAA1D,EAAoE;AAClE,YAAM,IAAI,KAAJ,CACJ,8HADI,CAAN;AAGD;;AACD,SAAK,QAAL,GAAgB,OAAO,CAAC,QAAxB;AACA,SAAK,OAAL,GAAe,OAAO,CAAC,OAAvB;AACD;AAED;;;;;AAKG;;;AACH,EAAA,iBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,WAAZ,EAAwC;AACtC,QAAI,CAAC,WAAL,EAAkB;AAChB,aAAO,OAAO,CAAC,MAAR,CACL,IAAI,KAAJ,CAAU,yEAAV,CADK,CAAP;AAGD;;AAED,QAAI,KAAK,QAAT,EAAmB;AACjB,UAAI,CAAC,WAAW,CAAC,OAAjB,EAA0B;AACxB,QAAA,WAAW,CAAC,OAAZ,GAAsB,IAAI,WAAJ,EAAtB;AACD;;AACD,WAAK,IAAM,UAAX,IAAyB,KAAK,QAA9B,EAAwC;AACtC,QAAA,WAAW,CAAC,OAAZ,CAAoB,GAApB,CAAwB,UAAxB,EAAoC,KAAK,QAAL,CAAc,UAAd,CAApC;AACD;AACF;;AAED,QAAI,KAAK,OAAT,EAAkB;AAChB,UAAI,CAAC,WAAW,CAAC,GAAjB,EAAsB;AACpB,eAAO,OAAO,CAAC,MAAR,CAAe,IAAI,KAAJ,CAAU,2CAAV,CAAf,CAAP;AACD;;AACD,UAAI,WAAW,CAAC,GAAZ,CAAgB,OAAhB,CAAwB,GAAxB,IAA+B,CAAnC,EAAsC;AACpC,QAAA,WAAW,CAAC,GAAZ,IAAmB,GAAnB;AACD;;AACD,WAAK,IAAM,GAAX,IAAkB,KAAK,OAAvB,EAAgC;AAC9B,YAAI,CAAC,WAAW,CAAC,GAAZ,CAAgB,QAAhB,CAAyB,GAAzB,CAAL,EAAoC;AAClC,UAAA,WAAW,CAAC,GAAZ,IAAmB,GAAnB;AACD;;AACD,QAAA,WAAW,CAAC,GAAZ,IAAsB,GAAG,GAAA,GAAH,GAAO,KAAK,OAAL,CAAa,GAAb,CAA7B;AACD;AACF;;AAED,WAAO,OAAO,CAAC,OAAR,CAAgB,WAAhB,CAAP;AACD,GAhCD;;AAiCF,SAAA,iBAAA;AAAC,CA/DD,EAAA","sourceRoot":"","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License. See License.txt in the project root for license information.\r\nimport { HttpHeaders } from \"../httpHeaders\";\r\n/**\r\n * Authenticates to a service using an API key.\r\n */\r\nvar ApiKeyCredentials = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param {object} options   Specifies the options to be provided for auth. Either header or query needs to be provided.\r\n     */\r\n    function ApiKeyCredentials(options) {\r\n        if (!options || (options && !options.inHeader && !options.inQuery)) {\r\n            throw new Error(\"options cannot be null or undefined. Either \\\"inHeader\\\" or \\\"inQuery\\\" property of the options object needs to be provided.\");\r\n        }\r\n        this.inHeader = options.inHeader;\r\n        this.inQuery = options.inQuery;\r\n    }\r\n    /**\r\n     * Signs a request with the values provided in the inHeader and inQuery parameter.\r\n     *\r\n     * @param {WebResource} webResource The WebResource to be signed.\r\n     * @returns {Promise<WebResource>} The signed request object.\r\n     */\r\n    ApiKeyCredentials.prototype.signRequest = function (webResource) {\r\n        if (!webResource) {\r\n            return Promise.reject(new Error(\"webResource cannot be null or undefined and must be of type \\\"object\\\".\"));\r\n        }\r\n        if (this.inHeader) {\r\n            if (!webResource.headers) {\r\n                webResource.headers = new HttpHeaders();\r\n            }\r\n            for (var headerName in this.inHeader) {\r\n                webResource.headers.set(headerName, this.inHeader[headerName]);\r\n            }\r\n        }\r\n        if (this.inQuery) {\r\n            if (!webResource.url) {\r\n                return Promise.reject(new Error(\"url cannot be null in the request object.\"));\r\n            }\r\n            if (webResource.url.indexOf(\"?\") < 0) {\r\n                webResource.url += \"?\";\r\n            }\r\n            for (var key in this.inQuery) {\r\n                if (!webResource.url.endsWith(\"?\")) {\r\n                    webResource.url += \"&\";\r\n                }\r\n                webResource.url += key + \"=\" + this.inQuery[key];\r\n            }\r\n        }\r\n        return Promise.resolve(webResource);\r\n    };\r\n    return ApiKeyCredentials;\r\n}());\r\nexport { ApiKeyCredentials };\r\n//# sourceMappingURL=apiKeyCredentials.js.map"]},"metadata":{},"sourceType":"module"}