{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _writableTrackingBuffer = _interopRequireDefault(require(\"../tracking-buffer/writable-tracking-buffer\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar TVP_ROW_TOKEN = Buffer.from([0x01]);\nvar TVP_END_TOKEN = Buffer.from([0x00]);\nvar NULL_LENGTH = Buffer.from([0xFF, 0xFF]);\nvar TVP = {\n  id: 0xF3,\n  type: 'TVPTYPE',\n  name: 'TVP',\n  declaration: function declaration(parameter) {\n    var value = parameter.value; // Temporary solution. Remove 'any' later.\n\n    return value.name + ' readonly';\n  },\n  generateTypeInfo: function generateTypeInfo(parameter) {\n    var _parameter$value$sche, _parameter$value, _parameter$value$name, _parameter$value2;\n\n    var databaseName = '';\n    var schema = (_parameter$value$sche = (_parameter$value = parameter.value) === null || _parameter$value === void 0 ? void 0 : _parameter$value.schema) !== null && _parameter$value$sche !== void 0 ? _parameter$value$sche : '';\n    var typeName = (_parameter$value$name = (_parameter$value2 = parameter.value) === null || _parameter$value2 === void 0 ? void 0 : _parameter$value2.name) !== null && _parameter$value$name !== void 0 ? _parameter$value$name : '';\n    var bufferLength = 1 + 1 + Buffer.byteLength(databaseName, 'ucs2') + 1 + Buffer.byteLength(schema, 'ucs2') + 1 + Buffer.byteLength(typeName, 'ucs2');\n    var buffer = new _writableTrackingBuffer.default(bufferLength, 'ucs2');\n    buffer.writeUInt8(this.id);\n    buffer.writeBVarchar(databaseName);\n    buffer.writeBVarchar(schema);\n    buffer.writeBVarchar(typeName);\n    return buffer.data;\n  },\n  generateParameterLength: function generateParameterLength(parameter, options) {\n    if (parameter.value == null) {\n      return NULL_LENGTH;\n    }\n\n    var columns = parameter.value.columns;\n    var buffer = Buffer.alloc(2);\n    buffer.writeUInt16LE(columns.length, 0);\n    return buffer;\n  },\n  generateParameterData: /*#__PURE__*/_regeneratorRuntime.mark(function generateParameterData(parameter, options) {\n    var _parameter$value3, columns, rows, i, len, column, buff, _i, length, row, k, len2, _column, value, param;\n\n    return _regeneratorRuntime.wrap(function generateParameterData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(parameter.value == null)) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return TVP_END_TOKEN;\n\n          case 3:\n            _context.next = 5;\n            return TVP_END_TOKEN;\n\n          case 5:\n            return _context.abrupt(\"return\");\n\n          case 6:\n            _parameter$value3 = parameter.value, columns = _parameter$value3.columns, rows = _parameter$value3.rows;\n            i = 0, len = columns.length;\n\n          case 8:\n            if (!(i < len)) {\n              _context.next = 22;\n              break;\n            }\n\n            column = columns[i];\n            buff = Buffer.alloc(6); // UserType\n\n            buff.writeUInt32LE(0x00000000, 0); // Flags\n\n            buff.writeUInt16LE(0x0000, 4);\n            _context.next = 15;\n            return buff;\n\n          case 15:\n            _context.next = 17;\n            return column.type.generateTypeInfo(column);\n\n          case 17:\n            _context.next = 19;\n            return Buffer.from([0x00]);\n\n          case 19:\n            i++;\n            _context.next = 8;\n            break;\n\n          case 22:\n            _context.next = 24;\n            return TVP_END_TOKEN;\n\n          case 24:\n            _i = 0, length = rows.length;\n\n          case 25:\n            if (!(_i < length)) {\n              _context.next = 43;\n              break;\n            }\n\n            _context.next = 28;\n            return TVP_ROW_TOKEN;\n\n          case 28:\n            row = rows[_i];\n            k = 0, len2 = row.length;\n\n          case 30:\n            if (!(k < len2)) {\n              _context.next = 40;\n              break;\n            }\n\n            _column = columns[k];\n            value = row[k];\n            param = {\n              value: value,\n              length: _column.length,\n              scale: _column.scale,\n              precision: _column.precision\n            }; // TvpColumnData\n\n            _context.next = 36;\n            return _column.type.generateParameterLength(param, options);\n\n          case 36:\n            return _context.delegateYield(_column.type.generateParameterData(param, options), \"t0\", 37);\n\n          case 37:\n            k++;\n            _context.next = 30;\n            break;\n\n          case 40:\n            _i++;\n            _context.next = 25;\n            break;\n\n          case 43:\n            _context.next = 45;\n            return TVP_END_TOKEN;\n\n          case 45:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, generateParameterData);\n  }),\n  validate: function validate(value) {\n    if (value == null) {\n      return null;\n    }\n\n    if (typeof value !== 'object') {\n      throw new TypeError('Invalid table.');\n    }\n\n    if (!Array.isArray(value.columns)) {\n      throw new TypeError('Invalid table.');\n    }\n\n    if (!Array.isArray(value.rows)) {\n      throw new TypeError('Invalid table.');\n    }\n\n    return value;\n  }\n};\nvar _default = TVP;\nexports.default = _default;\nmodule.exports = TVP;","map":{"version":3,"sources":["C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/mssql/node_modules/tedious/lib/data-types/tvp.js"],"names":["Object","defineProperty","exports","value","default","_writableTrackingBuffer","_interopRequireDefault","require","obj","__esModule","TVP_ROW_TOKEN","Buffer","from","TVP_END_TOKEN","NULL_LENGTH","TVP","id","type","name","declaration","parameter","generateTypeInfo","_parameter$value$sche","_parameter$value","_parameter$value$name","_parameter$value2","databaseName","schema","typeName","bufferLength","byteLength","buffer","writeUInt8","writeBVarchar","data","generateParameterLength","options","columns","alloc","writeUInt16LE","length","generateParameterData","rows","i","len","column","buff","writeUInt32LE","row","k","len2","param","scale","precision","validate","TypeError","Array","isArray","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.default = void 0;\r\n\r\nvar _writableTrackingBuffer = _interopRequireDefault(require(\"../tracking-buffer/writable-tracking-buffer\"));\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nconst TVP_ROW_TOKEN = Buffer.from([0x01]);\r\nconst TVP_END_TOKEN = Buffer.from([0x00]);\r\nconst NULL_LENGTH = Buffer.from([0xFF, 0xFF]);\r\nconst TVP = {\r\n  id: 0xF3,\r\n  type: 'TVPTYPE',\r\n  name: 'TVP',\r\n  declaration: function (parameter) {\r\n    const value = parameter.value; // Temporary solution. Remove 'any' later.\r\n\r\n    return value.name + ' readonly';\r\n  },\r\n\r\n  generateTypeInfo(parameter) {\r\n    var _parameter$value$sche, _parameter$value, _parameter$value$name, _parameter$value2;\r\n\r\n    const databaseName = '';\r\n    const schema = (_parameter$value$sche = (_parameter$value = parameter.value) === null || _parameter$value === void 0 ? void 0 : _parameter$value.schema) !== null && _parameter$value$sche !== void 0 ? _parameter$value$sche : '';\r\n    const typeName = (_parameter$value$name = (_parameter$value2 = parameter.value) === null || _parameter$value2 === void 0 ? void 0 : _parameter$value2.name) !== null && _parameter$value$name !== void 0 ? _parameter$value$name : '';\r\n    const bufferLength = 1 + 1 + Buffer.byteLength(databaseName, 'ucs2') + 1 + Buffer.byteLength(schema, 'ucs2') + 1 + Buffer.byteLength(typeName, 'ucs2');\r\n    const buffer = new _writableTrackingBuffer.default(bufferLength, 'ucs2');\r\n    buffer.writeUInt8(this.id);\r\n    buffer.writeBVarchar(databaseName);\r\n    buffer.writeBVarchar(schema);\r\n    buffer.writeBVarchar(typeName);\r\n    return buffer.data;\r\n  },\r\n\r\n  generateParameterLength(parameter, options) {\r\n    if (parameter.value == null) {\r\n      return NULL_LENGTH;\r\n    }\r\n\r\n    const {\r\n      columns\r\n    } = parameter.value;\r\n    const buffer = Buffer.alloc(2);\r\n    buffer.writeUInt16LE(columns.length, 0);\r\n    return buffer;\r\n  },\r\n\r\n  *generateParameterData(parameter, options) {\r\n    if (parameter.value == null) {\r\n      yield TVP_END_TOKEN;\r\n      yield TVP_END_TOKEN;\r\n      return;\r\n    }\r\n\r\n    const {\r\n      columns,\r\n      rows\r\n    } = parameter.value;\r\n\r\n    for (let i = 0, len = columns.length; i < len; i++) {\r\n      const column = columns[i];\r\n      const buff = Buffer.alloc(6); // UserType\r\n\r\n      buff.writeUInt32LE(0x00000000, 0); // Flags\r\n\r\n      buff.writeUInt16LE(0x0000, 4);\r\n      yield buff; // TYPE_INFO\r\n\r\n      yield column.type.generateTypeInfo(column); // ColName\r\n\r\n      yield Buffer.from([0x00]);\r\n    }\r\n\r\n    yield TVP_END_TOKEN;\r\n\r\n    for (let i = 0, length = rows.length; i < length; i++) {\r\n      yield TVP_ROW_TOKEN;\r\n      const row = rows[i];\r\n\r\n      for (let k = 0, len2 = row.length; k < len2; k++) {\r\n        const column = columns[k];\r\n        const value = row[k];\r\n        const param = {\r\n          value: value,\r\n          length: column.length,\r\n          scale: column.scale,\r\n          precision: column.precision\r\n        }; // TvpColumnData\r\n\r\n        yield column.type.generateParameterLength(param, options);\r\n        yield* column.type.generateParameterData(param, options);\r\n      }\r\n    }\r\n\r\n    yield TVP_END_TOKEN;\r\n  },\r\n\r\n  validate: function (value) {\r\n    if (value == null) {\r\n      return null;\r\n    }\r\n\r\n    if (typeof value !== 'object') {\r\n      throw new TypeError('Invalid table.');\r\n    }\r\n\r\n    if (!Array.isArray(value.columns)) {\r\n      throw new TypeError('Invalid table.');\r\n    }\r\n\r\n    if (!Array.isArray(value.rows)) {\r\n      throw new TypeError('Invalid table.');\r\n    }\r\n\r\n    return value;\r\n  }\r\n};\r\nvar _default = TVP;\r\nexports.default = _default;\r\nmodule.exports = TVP;"]},"metadata":{},"sourceType":"script"}