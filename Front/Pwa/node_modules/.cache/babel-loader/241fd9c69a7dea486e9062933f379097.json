{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import PaypalCheckout from'../../Layouts/PaypalCheckout';import axios from'axios';import{toast}from'react-toastify';import Navbar from'../../Layouts/Navbar';import{useParams,useLocation}from'react-router-dom';import DatePicker from'../../Layouts/Date-Picker';import{Button}from'react-bootstrap';///import PWA\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/*#__PURE__*/_jsx(\"link\",{rel:\"manifest\",href:\"../../public/manifest.json\"});toast.configure({});var notifyS=function notifyS(){toast.success('Operación realizada con éxito',{position:toast.POSITION.TOP_CENTER,theme:\"colored\"});};var notifyE=function notifyE(){toast.error('Operación cancelada',{position:toast.POSITION.TOP_CENTER,theme:\"colored\"});};export default function Reserva(){// const location = useLocation();\n// let  {id_depto}  = useParams();\nvar storage=parseInt(sessionStorage.id_d);// const [pago, setPago] = useState([]);\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),id_rva=_useState2[0],setId_rva=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),fechas=_useState4[0],setFechas=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),arrayF=_useState6[0],setArrayF=_useState6[1];// const [count, setCount] = useState(false);\n// const [id_depto, setId_depto] = useState(location.state.id_d);\nvar id_d={id_dpto:storage};useEffect(function(){console.log('storage: ',storage);console.log('id depto:',id_d);getFechas(id_d);},[]);useEffect(function(){transformarFechas();},[fechas]);var transformarFechas=function transformarFechas(){var dates=fechas.map(function(e){var newFecha=new Date(e.fec_disp_no);var val=newFecha.toLocaleDateString(\"en-US\",e.fec_disp_no);return val;});setArrayF(dates);};var getFechas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('http://localhost:4000/API/disponibilidadNoId',id);case 2:res=_context.sent;setFechas(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getFechas(_x){return _ref.apply(this,arguments);};}();// useEffect((e)=>{\n//     // e.preventDefault();\n//     if (!id_rva) {\n//         getMontoPago(id_rva);\n//     };\n// },[]);\n// const getMontoPago = async (id) =>{\n//     // const res = await axios.get('http://localhost:4000/API/pago/montoPago/' + id)\n//     // setPago(res.data);\n//     // console.log(res);\n//     setCount({\n//         count: true\n//     })\n// }\n// function GenerarPago(props){\n//     const generarP = props.generar;\n//     if (generarP) {\n//        return PagoPaypal({id_rva})\n//     };\n//     return console.log('Falta generar ordende reserva');\n// };\n// function PagoPaypal(id_res){\n//     id_res.preventDefault();\n//     let myvar = pago.map((e)=>e.pago);\n//     console.log({myvar});\n//     return(\n//         <div>\n//             <PaypalCheckout\n//                 precio = {myvar}\n//                 id_rva = {id_res}\n//             />\n//         </div>);\n// };\nvar variable=sessionStorage.Pagar;useEffect(function(){variable=sessionStorage.Pagar;console.log('variable: ',variable);},[]);console.log('Inicio carga disponibilidad');console.log('Fechas: ',fechas);console.log('fechas ArrayF',arrayF);console.log('End carga disponibilidad');return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(DatePicker,{fechas:arrayF})]});}","map":{"version":3,"sources":["C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/src/components/Views/Reservas/Reserva.jsx"],"names":["React","useEffect","useState","PaypalCheckout","axios","toast","Navbar","useParams","useLocation","DatePicker","Button","configure","notifyS","success","position","POSITION","TOP_CENTER","theme","notifyE","error","Reserva","storage","parseInt","sessionStorage","id_d","id_rva","setId_rva","fechas","setFechas","arrayF","setArrayF","id_dpto","console","log","getFechas","transformarFechas","dates","map","e","newFecha","Date","fec_disp_no","val","toLocaleDateString","id","post","res","data","variable","Pagar"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PaypalCheckout from '../../Layouts/PaypalCheckout';\r\nimport axios from 'axios';\r\nimport {toast} from 'react-toastify';\r\nimport Navbar from '../../Layouts/Navbar';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport DatePicker from '../../Layouts/Date-Picker';\r\nimport {Button} from  'react-bootstrap';\r\n///import PWA\r\n<link rel=\"manifest\" href=\"../../public/manifest.json\"></link>\r\n\r\ntoast.configure({\r\n});\r\n\r\nconst notifyS = () =>{\r\n    toast.success('Operación realizada con éxito',{\r\n        position: toast.POSITION.TOP_CENTER,\r\n        theme: \"colored\"\r\n    });\r\n};\r\n\r\nconst notifyE = () =>{\r\n    toast.error('Operación cancelada',{\r\n        position: toast.POSITION.TOP_CENTER,\r\n        theme: \"colored\"\r\n    });\r\n};\r\n\r\nexport default function Reserva() {\r\n    // const location = useLocation();\r\n    // let  {id_depto}  = useParams();\r\n    let storage = parseInt(sessionStorage.id_d);\r\n    // const [pago, setPago] = useState([]);\r\n    const [id_rva, setId_rva] = useState(null);\r\n    const [fechas, setFechas] = useState([]);\r\n    const [arrayF, setArrayF] = useState([]);\r\n    // const [count, setCount] = useState(false);\r\n    // const [id_depto, setId_depto] = useState(location.state.id_d);\r\n    let id_d = {\r\n        id_dpto : storage\r\n    };\r\n\r\n    useEffect(() =>{\r\n        console.log('storage: ', storage);\r\n        console.log('id depto:', id_d);\r\n        getFechas(id_d);\r\n    },[]);\r\n  \r\n    useEffect(() => {\r\n        transformarFechas();\r\n    }, [fechas]);\r\n    \r\n    const transformarFechas = () =>{\r\n        const dates = fechas.map((e) => {\r\n            let newFecha = new Date(e.fec_disp_no);\r\n            const val = newFecha.toLocaleDateString(\"en-US\", e.fec_disp_no);\r\n            return val;\r\n            })\r\n        setArrayF(dates);\r\n    };\r\n\r\n    const getFechas = async (id) =>{\r\n        const res = await axios.post('http://localhost:4000/API/disponibilidadNoId', id)\r\n        setFechas(res.data);\r\n    };\r\n\r\n    // useEffect((e)=>{\r\n    //     // e.preventDefault();\r\n    //     if (!id_rva) {\r\n    //         getMontoPago(id_rva);\r\n    //     };\r\n    // },[]);\r\n\r\n    // const getMontoPago = async (id) =>{\r\n    //     // const res = await axios.get('http://localhost:4000/API/pago/montoPago/' + id)\r\n    //     // setPago(res.data);\r\n    //     // console.log(res);\r\n    //     setCount({\r\n    //         count: true\r\n    //     })\r\n    // }\r\n    \r\n    // function GenerarPago(props){\r\n    //     const generarP = props.generar;\r\n    //     if (generarP) {\r\n    //        return PagoPaypal({id_rva})\r\n    //     };\r\n    //     return console.log('Falta generar ordende reserva');\r\n    // };\r\n\r\n    // function PagoPaypal(id_res){\r\n    //     id_res.preventDefault();\r\n    //     let myvar = pago.map((e)=>e.pago);\r\n    //     console.log({myvar});\r\n    //     return(\r\n    //         <div>\r\n    //             <PaypalCheckout\r\n    //                 precio = {myvar}\r\n    //                 id_rva = {id_res}\r\n    //             />\r\n    //         </div>);\r\n    // };\r\n    \r\n    let variable = sessionStorage.Pagar;\r\n\r\n    useEffect(() => {\r\n        variable = sessionStorage.Pagar;\r\n        console.log('variable: ',variable)\r\n    },[])\r\n\r\n    console.log('Inicio carga disponibilidad');\r\n    console.log('Fechas: ',fechas);\r\n    console.log('fechas ArrayF', arrayF);\r\n    console.log('End carga disponibilidad');\r\n    \r\n    \r\n        return (\r\n            <div>\r\n                <Navbar/>\r\n                <DatePicker\r\n                    fechas={arrayF}\r\n                />                          \r\n            </div>\r\n        );\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}