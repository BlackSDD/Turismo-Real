{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import DayPicker,{DateUtils}from'react-day-picker';import{Button,Form}from'react-bootstrap';// import 'react-day-picker/lib/style.css';\nimport'../../assetss/css/Date-Picker.css';import axios from'axios';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DatePicker=/*#__PURE__*/function(_React$Component){_inherits(DatePicker,_React$Component);var _super=_createSuper(DatePicker);function DatePicker(props){var _this;_classCallCheck(this,DatePicker);_this=_super.call(this,props);_this.onInputChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));console.log(e.target.value);};_this.HandleReserva=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(from,to,num,reservado){var datos,newReserva,reserva,infoResv,idReserva,redir;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('# personas:',num);//Almaceno los datos del storage\ndatos={id_usr:sessionStorage.idUsuario,id_dpto:sessionStorage.id_d};newReserva={fec_ini_rva:from,fec_fin_rva:to,num_pers:parseInt(num),id_dpto:datos.id_dpto,id_usr:datos.id_usr};axios.post('http://localhost:4000/API/reserva',newReserva);_context.next=6;return axios.post('http://localhost:4000/API/reservaCurrent',datos);case 6:reserva=_context.sent;console.log('Reserva data 0:',reserva.data[0]);infoResv=reserva.data;idReserva=infoResv.map(function(e){var x=e.curr_id;return x;});console.log('infoResv:',infoResv.curr_id);console.log('id final: ',idReserva);sessionStorage.reserva=idReserva;// this.setState({reservado: true});\n// console.log('Reservado: ',reservado);\nsessionStorage.Pagar=true;redir={redirect:\"http://localhost:3000/paypal\"};return _context.abrupt(\"return\",/*#__PURE__*/_jsx(Redirect,{to:redir.redirect}));case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();_this.handleDayClick=_this.handleDayClick.bind(_assertThisInitialized(_this));_this.handleResetClick=_this.handleResetClick.bind(_assertThisInitialized(_this));_this.state=_this.getInitialState();return _this;}_createClass(DatePicker,[{key:\"getInitialState\",value:function getInitialState(){return{from:undefined,to:undefined};}},{key:\"handleDayClick\",value:function handleDayClick(day){var modifiers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(modifiers.disabled){return;}var range=DateUtils.addDayToRange(day,this.state);this.setState(range);this.setState({selectedDay:modifiers.selected?undefined:day});}},{key:\"handleResetClick\",value:function handleResetClick(){this.setState(this.getInitialState());}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,from=_this$state.from,to=_this$state.to,num=_this$state.num,reservado=_this$state.reservado;// const reservado = this.state;\nvar modifiers={start:from,end:to};console.log('rango: ',this.state.range);if(!reservado){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",id:\"container-date-picker\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[!from&&!to&&'Elija una fecha de check-in.',from&&!to&&'Elija una fecha de check-out',from&&to&&\"Fecha de reserva desde: \".concat(from.toLocaleDateString(),\" hasta:\\n                      \").concat(to.toLocaleDateString()),' ']}),from&&to&&/*#__PURE__*/_jsx(Button,{variant:\"info\",onClick:this.handleResetClick,children:\"Limpiar Campos de Fecha\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(DayPicker,{id:\"date-picker\",className:\"Selectable\",numberOfMonths:this.props.numberOfMonths,selectedDays:[from,{from:from,to:to}],showOutsideDays:true,disabledDays:this.props.fechas.map(function(date){return new Date(date);}),modifiers:modifiers,onDayClick:this.handleDayClick}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form,{children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Cantidad\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Ingrese la cantidad de personas\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"num\",onChange:this.onInputChange,required:true})]})}),from&&to&&/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:function onClick(){_this2.HandleReserva(from,to,num,reservado);},children:\"Continuar con la Reserva\"})]});}else return/*#__PURE__*/_jsx(\"br\",{});}}]);return DatePicker;}(React.Component);DatePicker.defaultProps={numberOfMonths:2};export{DatePicker as default};","map":{"version":3,"sources":["C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/src/components/Layouts/Date-Picker.jsx"],"names":["React","DayPicker","DateUtils","Button","Form","axios","Redirect","DatePicker","props","onInputChange","e","setState","target","name","value","console","log","HandleReserva","from","to","num","reservado","datos","id_usr","sessionStorage","idUsuario","id_dpto","id_d","newReserva","fec_ini_rva","fec_fin_rva","num_pers","parseInt","post","reserva","data","infoResv","idReserva","map","x","curr_id","Pagar","redir","redirect","handleDayClick","bind","handleResetClick","state","getInitialState","undefined","day","modifiers","disabled","range","addDayToRange","selectedDay","selected","start","end","toLocaleDateString","numberOfMonths","fechas","date","Date","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport DayPicker, { DateUtils } from 'react-day-picker';\r\nimport {Button, Form} from 'react-bootstrap';\r\n// import 'react-day-picker/lib/style.css';\r\nimport '../../assetss/css/Date-Picker.css'\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport default class DatePicker extends React.Component {\r\n  static defaultProps = {\r\n    numberOfMonths: 2,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleDayClick = this.handleDayClick.bind(this);\r\n    this.handleResetClick = this.handleResetClick.bind(this);\r\n    this.state = this.getInitialState();\r\n  }\r\n\r\n  getInitialState() {\r\n    return {\r\n      from: undefined,\r\n      to: undefined,\r\n    };\r\n  }\r\n\r\n  handleDayClick(day, modifiers = {})  {\r\n    if (modifiers.disabled) {\r\n        return;\r\n      }\r\n        const range = DateUtils.addDayToRange(day, this.state);\r\n        this.setState(range);\r\n        this.setState({\r\n            selectedDay: modifiers.selected ? undefined : day,\r\n        });\r\n  }\r\n\r\n  onInputChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value});\r\n    console.log(e.target.value)\r\n}\r\n\r\n  HandleReserva = async(from, to, num, reservado) =>{\r\n    console.log('# personas:',num)\r\n    //Almaceno los datos del storage\r\n    let datos ={\r\n      id_usr: sessionStorage.idUsuario,\r\n      id_dpto : sessionStorage.id_d\r\n    };\r\n    const newReserva = {\r\n      fec_ini_rva : from,\r\n      fec_fin_rva : to,\r\n      num_pers: parseInt(num),\r\n      id_dpto: datos.id_dpto,\r\n      id_usr: datos.id_usr\r\n    };\r\n    axios.post('http://localhost:4000/API/reserva', newReserva);\r\n    let reserva = await axios.post('http://localhost:4000/API/reservaCurrent', datos);\r\n    console.log('Reserva data 0:',reserva.data[0])\r\n    let infoResv = reserva.data;\r\n    let idReserva = infoResv.map((e)=>{\r\n        let x = e.curr_id;\r\n        return  x\r\n        }\r\n    )\r\n    console.log('infoResv:', infoResv.curr_id);\r\n    console.log('id final: ', idReserva)\r\n    sessionStorage.reserva = idReserva;\r\n    // this.setState({reservado: true});\r\n    // console.log('Reservado: ',reservado);\r\n    sessionStorage.Pagar = true;\r\n\r\n    let redir = { redirect: \"http://localhost:3000/paypal\" };\r\n    return(<Redirect to={redir.redirect}/>);\r\n  }\r\n\r\n  handleResetClick() {\r\n    this.setState(this.getInitialState());\r\n  }\r\n\r\n  render() {\r\n    const { from, to, num, reservado} = this.state;\r\n    // const reservado = this.state;\r\n    const modifiers = { start: from, end: to };\r\n    \r\n    console.log('rango: ',this.state.range)\r\n    if(!reservado){\r\n      return (\r\n        <div className=\"container\" id=\"container-date-picker\">\r\n          <h3>\r\n              {!from && !to && 'Elija una fecha de check-in.'}\r\n              {from && !to && 'Elija una fecha de check-out'}\r\n              {from &&\r\n                  to &&\r\n                  `Fecha de reserva desde: ${from.toLocaleDateString()} hasta:\r\n                      ${to.toLocaleDateString()}`}{' '}\r\n          </h3>\r\n              {from && to && (\r\n              <Button variant=\"info\" onClick={this.handleResetClick}>\r\n                Limpiar Campos de Fecha\r\n              </Button>\r\n              )}\r\n          <br/>\r\n          <DayPicker id=\"date-picker\"\r\n              className=\"Selectable\"\r\n              numberOfMonths={this.props.numberOfMonths}\r\n              selectedDays={[from, { from, to }]}\r\n              showOutsideDays\r\n              disabledDays={     \r\n                  this.props.fechas.map(date => new Date(date))              \r\n              }\r\n              modifiers={modifiers}\r\n              onDayClick={this.handleDayClick}\r\n          />\r\n          <br/>\r\n\r\n\r\n          <Form>\r\n            <Form.Group className=\"mb-3\" controlId=\"Cantidad\">\r\n              <Form.Label>Ingrese la cantidad de personas</Form.Label>\r\n              <Form.Control  name=\"num\"  onChange={this.onInputChange} required/>\r\n            </Form.Group>\r\n          </Form>\r\n\r\n          {from && to && (\r\n              <Button variant=\"success\" onClick={()=>{this.HandleReserva(from,to, num, reservado)}}>\r\n                  Continuar con la Reserva\r\n              </Button>\r\n          )}\r\n        </div>\r\n    );}else return (<br/>);\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}