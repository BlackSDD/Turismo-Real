{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useState,useEffect}from'react';import ReactDOM from'react-dom';import{useHistory}from'react-router-dom';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var PayPalButton=window.paypal.Buttons.driver(\"react\",{React:React,ReactDOM:ReactDOM});function PaypalCheckout(_ref){var precio=_ref.precio,id_rva=_ref.id_rva;// const [price, setPrice] = useState(0);\n// let history = useHistory();\nvar dolar=Math.round(precio/830);var _createOrder=function createOrder(data,actions){return actions.order.create({purchase_units:[{amount:{value:dolar}}]});};var _onApprove=function onApprove(data,actions){return actions.order.capture(handlePay());};function handlePay(e){console.log(\"Pago recibido\");setCount(true);}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),informeR=_useState2[0],setInformeR=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var urlId={id_reserva:id_rva};console.log({urlId:urlId});useEffect(function(){getInformeRes(urlId);},[]);var getInformeRes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('http://localhost:4000/API/informeResDet/',urlId);case 2:res=_context.sent;setInformeR(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getInformeRes(){return _ref2.apply(this,arguments);};}();console.log({informeR:informeR});if(count===false){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"El monto a pagar es \",dolar,\" \"]}),/*#__PURE__*/_jsx(PayPalButton,{createOrder:function createOrder(data,actions){return _createOrder(data,actions);},onApprove:function onApprove(data,actions){return _onApprove(data,actions);}}),/*#__PURE__*/_jsx(\"h1\",{children:informeR.Id_reserva})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Pago recibido\"}),informeR.map(function(e){return/*#__PURE__*/_jsx(\"p\",{children:e.Cliente});})]});}}export default PaypalCheckout;","map":{"version":3,"sources":["C:/Users/jesus/Documents/GitHub/Turismo-Real/Front/Pwa/src/components/Layouts/PaypalCheckout.js"],"names":["React","Component","useState","useEffect","ReactDOM","useHistory","axios","PayPalButton","window","paypal","Buttons","driver","PaypalCheckout","precio","id_rva","dolar","Math","round","createOrder","data","actions","order","create","purchase_units","amount","value","onApprove","capture","handlePay","e","console","log","setCount","informeR","setInformeR","count","urlId","id_reserva","getInformeRes","post","res","Id_reserva","map","Cliente"],"mappings":"ogBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,CAAoCC,SAApC,KAAoD,OAApD,CACA,MAAOC,CAAAA,QAAP,KAAsB,WAAtB,CACA,OAASC,UAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,YAAY,CAAGC,MAAM,CAACC,MAAP,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,OAA7B,CAAsC,CAAEX,KAAK,CAALA,KAAF,CAASI,QAAQ,CAARA,QAAT,CAAtC,CAArB,CAEA,QAASQ,CAAAA,cAAT,MAA2C,IAAjBC,CAAAA,MAAiB,MAAjBA,MAAiB,CAATC,MAAS,MAATA,MAAS,CACvC;AAEA;AAEA,GAAIC,CAAAA,KAAK,CAAGC,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAAC,GAAlB,CAAZ,CAEA,GAAMK,CAAAA,YAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAOC,OAAP,CAAmB,CACnC,MAAOA,CAAAA,OAAO,CAACC,KAAR,CAAcC,MAAd,CAAqB,CACxBC,cAAc,CAAE,CAAC,CACbC,MAAM,CAAE,CACRC,KAAK,CAAEV,KADC,CADK,CAAD,CADQ,CAArB,CAAP,CAOH,CARD,CAUA,GAAMW,CAAAA,UAAS,CAAG,QAAZA,CAAAA,SAAY,CAACP,IAAD,CAAOC,OAAP,CAAmB,CACjC,MAAOA,CAAAA,OAAO,CAACC,KAAR,CAAcM,OAAd,CAAsBC,SAAS,EAA/B,CAAP,CACH,CAFD,CAIA,QAASA,CAAAA,SAAT,CAAmBC,CAAnB,CAAqB,CACjBC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACAC,QAAQ,CAAC,IAAD,CAAR,CACH,CAxBsC,cA0BP9B,QAAQ,CAAC,EAAD,CA1BD,wCA0BhC+B,QA1BgC,eA0BtBC,WA1BsB,8BA2BbhC,QAAQ,CAAC,KAAD,CA3BK,yCA2BhCiC,KA3BgC,eA2BzBH,QA3ByB,eA6BvC,GAAII,CAAAA,KAAK,CAAG,CACRC,UAAU,CAAEvB,MADJ,CAAZ,CAIAgB,OAAO,CAACC,GAAR,CAAY,CAACK,KAAK,CAALA,KAAD,CAAZ,EAEAjC,SAAS,CAAC,UAAM,CACZmC,aAAa,CAACF,KAAD,CAAb,CACH,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAME,CAAAA,aAAa,2FAAG,iKACAhC,CAAAA,KAAK,CAACiC,IAAN,CAAW,0CAAX,CAAuDH,KAAvD,CADA,QACZI,GADY,eAElBN,WAAW,CAACM,GAAG,CAACrB,IAAL,CAAX,CAFkB,sDAAH,kBAAbmB,CAAAA,aAAa,2CAAnB,CAKAR,OAAO,CAACC,GAAR,CAAY,CAACE,QAAQ,CAARA,QAAD,CAAZ,EAEA,GAAGE,KAAK,GAAG,KAAX,CAAiB,CACb,mBACI,oCACI,6CAAyBpB,KAAzB,OADJ,cAEI,KAAC,YAAD,EACA,WAAW,CAAE,qBAACI,IAAD,CAAOC,OAAP,QAAmBF,CAAAA,YAAW,CAACC,IAAD,CAAOC,OAAP,CAA9B,EADb,CAEA,SAAS,CAAE,mBAACD,IAAD,CAAOC,OAAP,QAAmBM,CAAAA,UAAS,CAACP,IAAD,CAAOC,OAAP,CAA5B,EAFX,EAFJ,cAMI,oBAAKa,QAAQ,CAACQ,UAAd,EANJ,GADJ,CAUH,CAXD,IAYK,CACL,mBACI,oCACI,qCADJ,CAIQR,QAAQ,CAACS,GAAT,CAAa,SAAAb,CAAC,qBACV,mBAAIA,CAAC,CAACc,OAAN,EADU,EAAd,CAJR,GADJ,CAYC,CACJ,CAED,cAAe/B,CAAAA,cAAf","sourcesContent":["import React, {Component, useState, useEffect} from 'react';\r\nimport ReactDOM  from 'react-dom';\r\nimport { useHistory} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst PayPalButton = window.paypal.Buttons.driver(\"react\", { React, ReactDOM });\r\n\r\nfunction PaypalCheckout ({precio, id_rva}) {\r\n    // const [price, setPrice] = useState(0);\r\n\r\n    // let history = useHistory();\r\n\r\n    let dolar = Math.round(precio/830);\r\n\r\n    const createOrder = (data, actions) => {\r\n        return actions.order.create({\r\n            purchase_units: [{\r\n                amount: {\r\n                value: dolar,\r\n                },\r\n            }]\r\n        });\r\n    };\r\n\r\n    const onApprove = (data, actions) => {\r\n        return actions.order.capture(handlePay());\r\n    };\r\n\r\n    function handlePay(e){\r\n        console.log(\"Pago recibido\");\r\n        setCount(true);\r\n    }\r\n    \r\n    const [informeR, setInformeR] = useState([])\r\n    const [count, setCount] = useState(false);\r\n\r\n    let urlId = {\r\n        id_reserva: id_rva\r\n    }\r\n    \r\n    console.log({urlId})\r\n    \r\n    useEffect(() => {\r\n        getInformeRes(urlId);\r\n    },[]);\r\n\r\n    const getInformeRes = async () => {\r\n        const res = await axios.post('http://localhost:4000/API/informeResDet/', urlId )\r\n        setInformeR(res.data)\r\n    }\r\n\r\n    console.log({informeR})\r\n\r\n    if(count===false){\r\n        return( \r\n            <div>\r\n                <h1>El monto a pagar es {dolar} </h1>\r\n                <PayPalButton\r\n                createOrder={(data, actions) => createOrder(data, actions)}\r\n                onApprove={(data, actions) => onApprove(data, actions)}\r\n                />\r\n                <h1>{informeR.Id_reserva}</h1>\r\n            </div>\r\n        );\r\n    }\r\n    else {\r\n    return(\r\n        <div>\r\n            <h1>Pago recibido</h1>\r\n            \r\n            {\r\n                informeR.map(e =>\r\n                    <p>{e.Cliente}</p>    \r\n                )\r\n            }\r\n            \r\n        </div>\r\n    );\r\n    }\r\n}\r\n\r\nexport default PaypalCheckout  \r\n"]},"metadata":{},"sourceType":"module"}